import{c as x,u as K,I as O,a as Q,p as U,o as V,t as m,s as W,i as n,f as h,b as t,X as a,e as i,d as w,m as b,h as j,n as Y}from"./index-DbMwMWgQ.js";import{F as k,S as Z,v as I,r as ee,f as te}from"./Spinner-DboilbCQ.js";import{c as re,a as L}from"./authService-DV_9Ebx2.js";import{l as se}from"./logo_only_color_cashierly-F9Mhun4y.js";var ae=m('<div class="max-w-md w-full space-y-4"><div class="text-center space-y-4 flex flex-col"><img alt="Cashierly Logo"class="mx-auto h-48"><span>Cashierly'),le=m("<div><h2></h2><p></p><button>"),oe=m("<h2>"),ne=m("<p>"),ie=m("<div class=space-y-5>"),de=m('<button type=submit><div class="flex items-center gap-2">'),ce=m('<div class="text-center mt-4"><p> <a href=/auth/login>'),ue=m("<input type=hidden name=email>"),me=m("<input type=hidden name=token>");const xe=()=>{const[d,C]=x(!1),[D,N]=x(!1),[g,R]=x("email"),[q,A]=x(null),[S,H]=x(null),F=K(),[P]=O(),{isDarkMode:c}=Q(),[$]=U();V(()=>{$.token&&(R("password"),A($.email),H($.token))});const[ge,{Form:X,Field:_}]=re({validate:u=>g()==="password"?I(ee)(u):I(te)(u)}),z=async u=>{C(!0);try{if(g()==="email"){const v=await L.resetPassword(u);j.success(v?.success),N(!0)}else if(g()==="password"){const v={token:S(),newPassword:u.password},f=await L.changePassword(v);j.success(f?.success),F("/auth/login")}}catch(v){console.error("Password reset request failed:",v)}finally{C(!1)}};return(()=>{var u=ae(),v=u.firstChild,f=v.firstChild,G=f.nextSibling;return W(f,"src",se),n(u,(()=>{var J=h(()=>!!D());return()=>J()?(()=>{var r=le(),s=r.firstChild,e=s.nextSibling,o=e.nextSibling;return n(s,t(a,{key:"resetPassword.checkEmail"})),n(e,t(a,{key:"resetPassword.emailSent"})),o.$$click=()=>F("/auth/login"),i(o,T),n(o,t(a,{key:"resetPassword.returnToLogin"})),w(l=>{var y=B(c()),p=M(c()),E=`text-center ${c()?"text-gray-300":"text-gray-600"} mb-4`;return y!==l.e&&i(r,l.e=y),p!==l.t&&i(s,l.t=p),E!==l.a&&i(e,l.a=E),l},{e:void 0,t:void 0,a:void 0}),r})():t(X,{onSubmit:z,get class(){return B(c())},get children(){return[(()=>{var r=oe();return n(r,(()=>{var s=h(()=>g()==="email");return()=>s()?t(a,{key:"resetPassword.title"}):t(a,{key:"resetPassword.resetTitle"})})()),w(()=>i(r,M(c()))),r})(),(()=>{var r=ne();return n(r,(()=>{var s=h(()=>g()==="email");return()=>s()?t(a,{key:"resetPassword.enterEmailInfo"}):t(a,{key:"resetPassword.enterPasswordInfo"})})()),w(()=>i(r,`text-center ${c()?"text-gray-300":"text-gray-600"} mb-4`)),r})(),(()=>{var r=ie();return n(r,(()=>{var s=h(()=>g()==="email");return()=>s()?t(_,{name:"email",children:(e,o)=>t(k,b(o,{get value(){return e.value},get error(){return e.error},get label(){return t(a,{key:"resetPassword.email"})},type:"text",get placeholder(){return P("resetPassword.emailPlaceholder")}}))}):[t(_,{name:"password",children:(e,o)=>t(k,b(o,{get value(){return e.value},get error(){return e.error},get label(){return t(a,{key:"resetPassword.newPassword"})},type:"password",get placeholder(){return P("resetPassword.newPasswordPlaceholder")}}))}),t(_,{name:"confirmPassword",children:(e,o)=>t(k,b(o,{get value(){return e.value},get error(){return e.error},get label(){return t(a,{key:"resetPassword.confirmPassword"})},type:"password",get placeholder(){return P("resetPassword.confirmPasswordPlaceholder")}}))}),(()=>{var e=ue();return w(()=>e.value=q()),e})(),(()=>{var e=me();return w(()=>e.value=S()),e})()]})()),r})(),(()=>{var r=de(),s=r.firstChild;return i(r,T),n(s,(()=>{var e=h(()=>!!d());return()=>e()&&t(Z,{})})(),null),n(s,(()=>{var e=h(()=>!!d());return()=>e()?t(a,{key:"resetPassword.sending"}):h(()=>g()==="email")()?t(a,{key:"resetPassword.resetButton"}):t(a,{key:"resetPassword.updateButton"})})(),null),w(()=>r.disabled=d()),r})(),(()=>{var r=ce(),s=r.firstChild,e=s.firstChild,o=e.nextSibling;return n(s,t(a,{key:"resetPassword.rememberPassword"}),e),n(o,t(a,{key:"resetPassword.signInHere"})),w(l=>{var y=`text-sm ${c()?"text-gray-300":"text-gray-600"}`,p=we(c());return y!==l.e&&i(s,l.e=y),p!==l.t&&i(o,l.t=p),l},{e:void 0,t:void 0}),r})()]}})})(),null),w(()=>i(G,`text-4xl font-bold ${c()?"text-white":"text-gray-900"}`)),u})()},M=d=>`text-2xl font-bold ${d?"text-gray-100":"text-gray-900"} text-center`,B=d=>["mt-4 space-y-6",d?"bg-gray-800 text-white":"bg-white","p-8","rounded-2xl shadow-lg"].join(" "),T=["w-full flex justify-center","py-3 px-4 rounded-xl","shadow-sm text-sm font-medium","text-white btn-primary"].join(" "),we=d=>["font-medium",d?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"].join(" ");Y(["click"]);export{xe as default};
