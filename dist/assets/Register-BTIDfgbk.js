import{v as M,c as F,u as D,I as N,a as R,k as H,t as h,i as l,b as e,X as o,m as k,e as d,d as v,f as S,h as L}from"./index-Dgi8wYgQ.js";import{c as q,a as U}from"./authService-BoypurrR.js";import{F as w,S as j,v as E,a as J}from"./Spinner-C5fwcexh.js";function O(n,f=500){let u;return function(...m){const g=this;return u&&clearTimeout(u),u=setTimeout(()=>{n.apply(g,m)},f),{cancel:()=>{u&&(clearTimeout(u),u=null)}}}}function X(n){return M({a:{viewBox:"0 0 512 512"},c:'<path d="M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48Zm-38 312.38-80.6-89.57 23.79-21.41 56 62.22L350 153.46 374.54 174Z"/>'},n)}function z(n){return M({a:{viewBox:"0 0 512 512"},c:'<path d="M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48Zm86.63 272L320 342.63l-64-64-64 64L169.37 320l64-64-64-64L192 169.37l64 64 64-64L342.63 192l-64 64Z"/>'},n)}var G=h("<div class=space-y-5><div class=relative>"),K=h('<button type=submit><div class="flex items-center gap-2">'),Q=h('<div class="text-center mt-4"><p> <a href=/auth/login>'),V=h('<div class="max-w-md w-full space-y-8"><div class=text-center><h1></h1><p>'),W=h("<div>"),Y=h('<div class="absolute right-3 top-[38px]">');const ce=()=>{const[n,f]=F(!1),u=D(),[m]=N(),{isDarkMode:g}=R(),[le,{Form:A,Field:y}]=q({validate:E(J)}),[p,x]=F({checking:!1,available:null}),_=O(async a=>{if(!(!a||a.length<3))try{x({checking:!0,available:null});const c=await U.checkUsername(a);x({checking:!1,available:c.available})}catch{x({checking:!1,available:null})}},1e3),B=a=>{const c=a.target.value;c.length<3&&x({checking:!1,available:null}),_(c)},T=async a=>{if(p().available===!1){L.warning(messages.chooseDifferentUsername);return}f(!0);try{const c=await U.register({email:a.email,username:a.username,password:a.password});localStorage.setItem("otpRequest",JSON.stringify({email:a.email,expired_at:c.expired_at})),L.success(c?.success),u("/auth/otp",{replace:!0})}finally{f(!1)}};return H(()=>{_.cancel&&_.cancel()}),(()=>{var a=V(),c=a.firstChild,$=c.firstChild,I=$.nextSibling;return l($,e(o,{key:"register.createAccount"})),l(I,e(o,{key:"register.joinUs"})),l(a,e(A,{onSubmit:T,get class(){return re(g())},get children(){return[(()=>{var t=G(),s=t.firstChild;return l(t,e(y,{name:"email",children:(r,i)=>e(w,k(i,{get value(){return r.value},get error(){return r.error},get label(){return e(o,{key:"register.email"})},type:"email",get placeholder(){return m("register.emailPlaceholder")}}))}),s),l(s,e(y,{name:"username",children:(r,i)=>(()=>{var C=W();return l(C,e(w,k(i,{get value(){return r.value},get error(){return r.error},get label(){return e(o,{key:"register.username"})},type:"text",get placeholder(){return m("register.usernamePlaceholder")},onInput:b=>{i.onInput(b),B(b)}})),null),l(C,(()=>{var b=d(()=>r.value?.length>=3);return()=>b()&&(()=>{var P=Y();return l(P,(()=>{var Z=d(()=>!!p().checking);return()=>Z()?e(j,{color:"primary-500"}):d(()=>p().available===!0)()?e(X,{class:"h-5 w-5 text-green-500"}):d(()=>p().available===!1)()?e(z,{class:"h-5 w-5 text-red-500"}):null})()),P})()})(),null),C})()})),l(t,e(y,{name:"password",children:(r,i)=>e(w,k(i,{get value(){return r.value},get error(){return r.error},get label(){return e(o,{key:"register.password"})},type:"password",get placeholder(){return m("register.passwordPlaceholder")}}))}),null),l(t,e(y,{name:"confirmPassword",children:(r,i)=>e(w,k(i,{get value(){return r.value},get error(){return r.error},get label(){return e(o,{key:"register.confirmPassword"})},type:"password",get placeholder(){return m("register.confirmPasswordPlaceholder")}}))}),null),t})(),(()=>{var t=K(),s=t.firstChild;return v(t,te),l(s,(()=>{var r=d(()=>!!n());return()=>r()&&e(j,{})})(),null),l(s,(()=>{var r=d(()=>!!n());return()=>r()?e(o,{key:"register.creatingAccount"}):e(o,{key:"register.createAccountButton"})})(),null),S(()=>t.disabled=n()||p().checking),t})(),(()=>{var t=Q(),s=t.firstChild,r=s.firstChild,i=r.nextSibling;return l(s,e(o,{key:"register.alreadyHaveAccount"}),r),v(i,ae),l(i,e(o,{key:"register.signInHere"})),S(()=>v(s,`text-sm ${g()?"text-gray-300":"text-gray-600"}`)),t})()]}}),null),S(t=>{var s=ee(g()),r=`${g()?"text-gray-300":"text-gray-600"}`;return s!==t.e&&v($,t.e=s),r!==t.t&&v(I,t.t=r),t},{e:void 0,t:void 0}),a})()},ee=n=>`text-4xl font-extrabold ${n?"text-gray-100":"text-gray-900"} mb-2`,re=n=>["mt-8 space-y-6",n?"bg-gray-800 text-white":"bg-white","p-8","rounded-2xl shadow-lg"].join(" "),te=["w-full flex justify-center","py-3 px-4 rounded-xl","shadow-sm text-sm font-medium","text-white btn-primary"].join(" "),ae=["font-medium","text-blue-600","hover:text-blue-500"].join(" ");export{ce as default};
