import{v as M,c as F,u as D,I as N,a as R,k as H,t as p,i as n,b as e,X as o,m as _,f as v,e as y,d as I,h as L}from"./index-DbMwMWgQ.js";import{c as q,a as U}from"./authService-DV_9Ebx2.js";import{F as $,S as j,v as E,a as J}from"./Spinner-DboilbCQ.js";function O(a,b=500){let m;return function(...h){const g=this;return m&&clearTimeout(m),m=setTimeout(()=>{a.apply(g,h)},b),{cancel:()=>{m&&(clearTimeout(m),m=null)}}}}function X(a){return M({a:{viewBox:"0 0 512 512"},c:'<path d="M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48Zm-38 312.38-80.6-89.57 23.79-21.41 56 62.22L350 153.46 374.54 174Z"/>'},a)}function z(a){return M({a:{viewBox:"0 0 512 512"},c:'<path d="M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48Zm86.63 272L320 342.63l-64-64-64 64L169.37 320l64-64-64-64L192 169.37l64 64 64-64L342.63 192l-64 64Z"/>'},a)}var G=p("<div class=space-y-5><div class=relative>"),K=p('<button type=submit><div class="flex items-center gap-2">'),Q=p('<div class="text-center mt-4"><p> <a href=/auth/login>'),V=p('<div class="max-w-md w-full space-y-8"><div class=text-center><h1></h1><p>'),W=p("<div>"),Y=p('<div class="absolute right-3 top-[38px]">');const ce=()=>{const[a,b]=F(!1),m=D(),[h]=N(),{isDarkMode:g}=R(),[le,{Form:A,Field:k}]=q({validate:E(J)}),[f,w]=F({checking:!1,available:null}),C=O(async l=>{if(!(!l||l.length<3))try{w({checking:!0,available:null});const c=await U.checkUsername(l);w({checking:!1,available:c.available})}catch{w({checking:!1,available:null})}},1e3),B=l=>{const c=l.target.value;c.length<3&&w({checking:!1,available:null}),C(c)},T=async l=>{if(f().available===!1){L.warning(messages.chooseDifferentUsername);return}b(!0);try{const c=await U.register({email:l.email,username:l.username,password:l.password});localStorage.setItem("otpRequest",JSON.stringify({email:l.email,expired_at:c.expired_at})),L.success(c?.success),m("/auth/otp",{replace:!0})}finally{b(!1)}};return H(()=>{C.cancel&&C.cancel()}),(()=>{var l=V(),c=l.firstChild,S=c.firstChild,P=S.nextSibling;return n(S,e(o,{key:"register.createAccount"})),n(P,e(o,{key:"register.joinUs"})),n(l,e(A,{onSubmit:T,get class(){return re(g())},get children(){return[(()=>{var t=G(),s=t.firstChild;return n(t,e(k,{name:"email",children:(r,i)=>e($,_(i,{get value(){return r.value},get error(){return r.error},get label(){return e(o,{key:"register.email"})},type:"email",get placeholder(){return h("register.emailPlaceholder")}}))}),s),n(s,e(k,{name:"username",children:(r,i)=>(()=>{var u=W();return n(u,e($,_(i,{get value(){return r.value},get error(){return r.error},get label(){return e(o,{key:"register.username"})},type:"text",get placeholder(){return h("register.usernamePlaceholder")},onInput:d=>{i.onInput(d),B(d)}})),null),n(u,(()=>{var d=v(()=>r.value?.length>=3);return()=>d()&&(()=>{var x=Y();return n(x,(()=>{var Z=v(()=>!!f().checking);return()=>Z()?e(j,{color:"primary-500"}):v(()=>f().available===!0)()?e(X,{class:"h-5 w-5 text-green-500"}):v(()=>f().available===!1)()?e(z,{class:"h-5 w-5 text-red-500"}):null})()),x})()})(),null),u})()})),n(t,e(k,{name:"password",children:(r,i)=>e($,_(i,{get value(){return r.value},get error(){return r.error},get label(){return e(o,{key:"register.password"})},type:"password",get placeholder(){return h("register.passwordPlaceholder")}}))}),null),n(t,e(k,{name:"confirmPassword",children:(r,i)=>e($,_(i,{get value(){return r.value},get error(){return r.error},get label(){return e(o,{key:"register.confirmPassword"})},type:"password",get placeholder(){return h("register.confirmPasswordPlaceholder")}}))}),null),t})(),(()=>{var t=K(),s=t.firstChild;return y(t,te),n(s,(()=>{var r=v(()=>!!a());return()=>r()&&e(j,{})})(),null),n(s,(()=>{var r=v(()=>!!a());return()=>r()?e(o,{key:"register.creatingAccount"}):e(o,{key:"register.createAccountButton"})})(),null),I(()=>t.disabled=a()||f().checking),t})(),(()=>{var t=Q(),s=t.firstChild,r=s.firstChild,i=r.nextSibling;return n(s,e(o,{key:"register.alreadyHaveAccount"}),r),n(i,e(o,{key:"register.signInHere"})),I(u=>{var d=`text-sm ${g()?"text-gray-300":"text-gray-600"}`,x=ae(g());return d!==u.e&&y(s,u.e=d),x!==u.t&&y(i,u.t=x),u},{e:void 0,t:void 0}),t})()]}}),null),I(t=>{var s=ee(g()),r=`${g()?"text-gray-300":"text-gray-600"}`;return s!==t.e&&y(S,t.e=s),r!==t.t&&y(P,t.t=r),t},{e:void 0,t:void 0}),l})()},ee=a=>`text-4xl font-extrabold ${a?"text-gray-100":"text-gray-900"} mb-2`,re=a=>["mt-8 space-y-6",a?"bg-gray-800 text-white":"bg-white","p-8","rounded-2xl shadow-lg"].join(" "),te=["w-full flex justify-center","py-3 px-4 rounded-xl","shadow-sm text-sm font-medium","text-white btn-primary"].join(" "),ae=a=>["font-medium",a?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"].join(" ");export{ce as default};
